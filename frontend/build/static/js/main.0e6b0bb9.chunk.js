(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{35:function(e,n,t){},36:function(e,n,t){},37:function(e,n,t){},57:function(e,n,t){},63:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),s=t.n(a),r=t(27),i=t.n(r),o=(t(35),t(28)),l=t(2),u=(t(36),function(){return Object(c.jsx)("div",{className:"main-layout",children:Object(c.jsx)("h1",{children:"Dataset"})})}),j=t(11),b=["\u7ebf\u7d22\u7ec6\u80de","\u964d\u89e3\u7684\u7ebf\u7d22\u7ec6\u80de","\u6ef4\u866b","\u4e73\u6746\u83cc","\u5ff5\u73e0\u83cc","\u767d\u7ec6\u80de"],d=(t(37),t(9)),h=t.n(d),f=t(12),p=t(13),O=t.n(p),x=function(){var e=Object(f.a)(h.a.mark((function e(n,t,c){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.put("/api/v1/instance/label",{uid:n,file:t,label:c},{headers:{"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t,c){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/api/v1/instance/info");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(f.a)(h.a.mark((function e(n,t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/v1/instance/label",{uid:n,file:t},{headers:{"Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=[],N=function(){var e=Object(a.useState)(g),n=Object(j.a)(e,2),t=n[0],s=n[1],r=Object(a.useState)(0),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(a.useState)(0),d=Object(j.a)(u,2),h=d[0],f=d[1],p=Object(a.useState)(""),O=Object(j.a)(p,2),N=O[0],k=O[1];Object(a.useEffect)((function(){v().then((function(e){var n=e.data;n.success||console.error(n.message),s(n.data),o<t.length&&f(t[o].label)})).catch((function(e){console.error(e)}))}),[]),Object(a.useEffect)((function(){if(0!==t.length){var e=t[o].uid,n=t[o].file;m(e,n).then((function(e){var n=e.data;n.success||console.error(n.message),o<t.length&&f(n.data.label)})).catch((function(e){console.error(e)}))}}),[t,o]);var y=function(e){return function(n){var t=null===h?0:h;n.target.checked?f(t|1<<e):f(t&~(1<<e))}},C=function(e){return function(n){var c=o+e;!isNaN(c)&&c>=0&&c<t.length&&(f(t[c].label),l(c))}};return Object(c.jsxs)("div",{className:"main-layout",children:[Object(c.jsx)("h1",{children:"Labeling"}),Object(c.jsxs)("div",{className:"instance",children:[Object(c.jsx)("div",{className:"instance-image",children:Object(c.jsx)("img",{src:t[o]&&"/file/".concat(t[o].image)})}),Object(c.jsx)("div",{className:"instance-image",children:Object(c.jsx)("img",{src:t[o]&&"/file/datasets/".concat(t[o].uid,"/").concat(t[o].file)})}),Object(c.jsxs)("div",{className:"info",children:[Object(c.jsx)("div",{className:"vertical-divider"}),Object(c.jsxs)("div",{className:"instance-properties",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h5",{children:"Image Uid:"}),Object(c.jsx)("p",{children:t[o]&&t[o].uid})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h5",{children:"Image File:"}),Object(c.jsx)("p",{children:t[o]&&t[o].image})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h5",{children:"Patch File:"}),Object(c.jsx)("p",{children:t[o]&&t[o].file})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h5",{children:"Label"}),Object(c.jsx)("p",{children:h})]})]})]})]}),Object(c.jsx)("div",{className:"checkboxes",children:b.map((function(e,n){return Object(c.jsxs)("span",{className:"checkbox",children:[Object(c.jsx)("input",{type:"checkbox",name:"category",checked:Boolean((null===h?0:h)&1<<n),onChange:y(n)}),e]})}))}),Object(c.jsx)("button",{id:"submit-button",onClick:function(e){if(!(o>=t.length)){var n=t[o].uid,c=t[o].file;x(n,c,h).then((function(e){var n=e.data;n.success||console.error(n.message)})).catch((function(e){console.error(e)}))}},disabled:null===h,children:"\u4fdd\u5b58"}),Object(c.jsxs)("div",{className:"paginator",children:[Object(c.jsx)("span",{onClick:C(-1),children:"\u276e"}),Array.from(Array(5).keys()).map((function(e){return e+Math.min(t.length-1-e,Math.max(o-2,0))})).filter((function(e){return e>=0&&e<t.length})).map((function(e,n){return Object(c.jsx)("span",{children:Object(c.jsx)("button",{onClick:(a=e,function(e){!isNaN(a)&&a>=0&&a<t.length&&(f(t[a].label),l(a))}),style:e===o?{color:"blue"}:{},children:e})});var a})),Object(c.jsx)("span",{onClick:C(1),children:"\u276f"}),Object(c.jsx)("span",{children:Object(c.jsx)("button",{onClick:function(){if(!(o>=t.length)){var e=t[o].uid,n=t[o].file;f(0),x(e,n,0).then((function(e){var n=e.data;n.success||console.error(n.message)})).catch((function(e){console.error(e)}))}},children:"\u786e\u8ba4\u826f\u6027"})}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{children:Object(c.jsx)("button",{onClick:function(e){var n=parseInt(N);!isNaN(n)&&n>=0&&n<t.length&&(f(t[n].label),l(n))},children:"\u8df3\u8f6c"})}),Object(c.jsx)("span",{children:Object(c.jsx)("input",{type:"text",value:N,onChange:function(e){k(e.target.value)}})})]})]})},k=t.p+"static/media/logo.6ce24c58.svg",y=(t(57),function(){return Object(c.jsx)("div",{className:"topbar",children:Object(c.jsx)("img",{src:k})})});var C=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(y,{}),Object(c.jsxs)(o.a,{children:[Object(c.jsx)(l.a,{path:"/dataset",component:u}),Object(c.jsx)(l.a,{path:"/",component:N})]})]})},w=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,64)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,s=n.getLCP,r=n.getTTFB;t(e),c(e),a(e),s(e),r(e)}))};i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(C,{})}),document.getElementById("root")),w()}},[[63,1,2]]]);
//# sourceMappingURL=main.0e6b0bb9.chunk.js.map